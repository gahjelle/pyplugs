version: 2

jobs:
  development:
    docker:
      - image: circleci/python:3.7

    steps:
      - checkout
      - run:
          name: Pyenv
          command: |
            python -m pip install tox tox-pyenv --user
            pyenv local 3.6.8 3.7.3
      - run:
          name: Install
          command: |
            python -m pip install flit --user
            python -m flit install --deps=develop
      - run:
          name: Test
          command: |
            python -m tox


workflows:
  version: 2

  development-workflow:
    jobs:
      - development
